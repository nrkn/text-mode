!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(){"use strict";function a(b,c,d){return("string"==typeof c?c:c.toString()).replace(b.define||g,function(a,c,e,f){return 0===c.indexOf("def.")&&(c=c.substring(4)),c in d||(":"===e?(b.defineParams&&f.replace(b.defineParams,function(a,b,e){d[c]={arg:b,text:e}}),c in d||(d[c]=f)):new Function("def","def['"+c+"']="+f)(d)),""}).replace(b.use||g,function(c,e){b.useParams&&(e=e.replace(b.useParams,function(a,b,c,e){if(d[c]&&d[c].arg&&e){var f=(c+":"+e).replace(/'|\\/g,"_");return d.__exp=d.__exp||{},d.__exp[f]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+e+"$2"),b+"def.__exp['"+f+"']"}}));var f=new Function("def","return "+e)(d);return f?a(b,f,d):f})}function c(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var d,e={version:"1.0.3",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0};e.encodeHTMLSource=function(a){var b={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},c=a?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(a){return a?a.toString().replace(c,function(a){return b[a]||a}):""}},d=function(){return this||(0,eval)("this")}(),"undefined"!=typeof b&&b.exports?b.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):d.doT=e;var f={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},g=/$^/;e.template=function(b,h,i){h=h||e.templateSettings;var j,k,l=h.append?f.append:f.split,m=0,n=h.use||h.define?a(h,b,i||{}):b;n=("var out='"+(h.strip?n.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):n).replace(/'|\\/g,"\\$&").replace(h.interpolate||g,function(a,b){return l.start+c(b)+l.end}).replace(h.encode||g,function(a,b){return j=!0,l.startencode+c(b)+l.end}).replace(h.conditional||g,function(a,b,d){return b?d?"';}else if("+c(d)+"){out+='":"';}else{out+='":d?"';if("+c(d)+"){out+='":"';}out+='"}).replace(h.iterate||g,function(a,b,d,e){return b?(m+=1,k=e||"i"+m,b=c(b),"';var arr"+m+"="+b+";if(arr"+m+"){var "+d+","+k+"=-1,l"+m+"=arr"+m+".length-1;while("+k+"<l"+m+"){"+d+"=arr"+m+"["+k+"+=1];out+='"):"';} } out+='"}).replace(h.evaluate||g,function(a,b){return"';"+c(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),j&&(h.selfcontained||!d||d._encodeHTML||(d._encodeHTML=e.encodeHTMLSource(h.doNotSkipEncoded)),n="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+e.encodeHTMLSource.toString()+"("+(h.doNotSkipEncoded||"")+"));"+n);try{return new Function(h.varname,n)}catch(o){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+n),o}},e.compile=function(a,b){return e.template(a,null,b)}}()},{}],2:[function(a,b,c){function d(a){this.__path=a.path||"./","/"!==this.__path[this.__path.length-1]&&(this.__path+="/"),this.__destination=a.destination||this.__path,"/"!==this.__destination[this.__destination.length-1]&&(this.__destination+="/"),this.__global=a.global||"window.render",this.__rendermodule=a.rendermodule||{},this.__settings=a.templateSettings?f(a.templateSettings,f(i.templateSettings)):void 0,this.__includes={}}function e(a){for(var b="",c=0;c<a.length;c++)b+="itself."+a[c]+"="+a[c]+";";return b}function f(a,b){b=b||{};for(var c in a)b[c]=a[c];return b}function g(a){var b=h.readFileSync(a);return b?b.toString():void console.log("problems with "+a)}var h=a("fs"),i=b.exports=a("./doT");i.process=function(a){return new d(a).compileAll()},d.prototype.compileToFile=function(a,b,c){c=c||{};var d,g=a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")),j=f(this.__includes,f(c)),k=this.__settings||i.templateSettings,l=f(k),m=i.template(b,k,j),n=[],o="";for(var p in j)j[p]!==c[p]&&j[p]!==this.__includes[p]&&(d=void 0,"string"==typeof j[p]?d=i.template(j[p],k,j):"function"==typeof j[p]?d=j[p]:j[p].arg&&(l.varname=j[p].arg,d=i.template(j[p].text,l,j)),d&&(o+=d.toString().replace("anonymous",p),n.push(p)));o+=m.toString().replace("anonymous",g),h.writeFileSync(a,"(function(){"+o+"var itself="+g+", _encodeHTML=("+i.encodeHTMLSource.toString()+"("+(k.doNotSkipEncoded||"")+"));"+e(n)+"if(typeof module!=='undefined' && module.exports) module.exports=itself;else if(typeof define==='function')define(function(){return itself;});else {"+this.__global+"="+this.__global+"||{};"+this.__global+"['"+g+"']=itself;}}());")},d.prototype.compilePath=function(a){var b=g(a);return b?i.template(b,this.__settings||i.templateSettings,f(this.__includes)):void 0},d.prototype.compileAll=function(){console.log("Compiling all doT templates...");var a,b,c,d=this.__path,e=h.readdirSync(d);for(a=0,b=e.length;b>a;a++)c=e[a],/\.def(\.dot|\.jst)?$/.test(c)&&(console.log("Loaded def "+c),this.__includes[c.substring(0,c.indexOf("."))]=g(d+c));for(a=0,b=e.length;b>a;a++)c=e[a],/\.dot(\.def|\.jst)?$/.test(c)&&(console.log("Compiling "+c+" to function"),this.__rendermodule[c.substring(0,c.indexOf("."))]=this.compilePath(d+c)),/\.jst(\.dot|\.def)?$/.test(c)&&(console.log("Compiling "+c+" to file"),this.compileToFile(this.__destination+c.substring(0,c.indexOf("."))+".js",g(d+c)));return this.__rendermodule}},{"./doT":1,fs:3}],3:[function(a,b,c){},{}],4:[function(a,b,c){window.TextMode=a("./text-mode")},{"./text-mode":6}],5:[function(a,b,c){function d(a,b){var c=document.createElement("span");document.body.appendChild(c),c.style.cssText="font: "+a,c.appendChild(document.createTextNode(b||"â•¬"));var d={width:c.offsetWidth,height:c.offsetHeight};return document.body.removeChild(c),d}b.exports=d},{}],6:[function(a,b,c){"use strict";function d(a,b){var c,h=this;"string"==typeof a?c=document.querySelector(a):a instanceof HTMLElement?c=a:(c=document.body,!b&&a&&Object.keys(a).some(function(a){return a in d.defaults})&&(b=a)),h.viewport=document.createElement("div"),c.appendChild(h.viewport),b=b||d.defaults,Object.keys(d.defaults).forEach(function(a){h[a]=a in b?b[a]:d.defaults[a]}),h.id=g(),h.viewport.id="tm-"+h.id,h.sheet=e(),h.charSize=m(h.font),h.size={width:h.columns*h.charSize.width,height:h.rows*h.charSize.height},n[h.id]={tiles:[],textNodes:[],fore:[],back:[],className:[],classMap:{},nextIndex:0};var j=o.viewport(h),k=o.tiles(h.charSize);f(h.sheet,"#"+h.viewport.id,j),f(h.sheet,"#"+h.viewport.id+" span",k),i(h)}function e(){var a=document.createElement("style");return document.head.appendChild(a),a.sheet}function f(a,b,c){var d=o.style({selector:b,rule:c});a.insertRule(d,a.cssRules.length)}function g(a){for(var b=a||"",c=0;8>c;c++)b+=Math.floor(16*Math.random()).toString(16);return b}function h(a){return n[a].nextIndex++}function i(a){a.each(function(b,c,d){var e=document.createElement("span"),f=document.createTextNode("");e.appendChild(f),a.viewport.appendChild(e),n[a.id].tiles[d]=e,n[a.id].textNodes[d]=f,n[a.id].className[d]="",j(a,b,c,d),a.setColor(b,c,a.fore,a.back)})}function j(a,b,c,d){var e=n[a.id].tiles[d],f={left:b*a.charSize.width,top:c*a.charSize.height};e.style.cssText=o.tile(f)}function k(a,b){var c=n[a.id].fore[b],d=n[a.id].back[b],e=c+","+d;return n[a.id].classMap[e]}var l=a("dot").template,m=a("./char-size");d.prototype.set=function(a,b,c,d,e,f){var g=this,h=b*g.columns+a;n[g.id].textNodes[h].nodeValue=c,(d||e)&&g.setColor(a,b,d,e),f&&g.setClassName(a,b,f)},d.prototype.setColor=function(a,b,c,d){var e=this,f=b*e.columns+a;if(c!==n[e.id].fore[f]||d!==n[e.id].back[f]){c=c||n[e.id].fore[f]||e.fore,d=d||n[e.id].back[f]||e.back,e.fore=n[e.id].fore[f]=c,e.back=n[e.id].back[f]=d;var g=c+","+d;g in n[e.id].classMap||e.addColor(c,d);var h=n[e.id].classMap[g];n[e.id].tiles[f].className=h+" "+n[e.id].className[f]}},d.prototype.setClassName=function(a,b,c){var d=this,e=b*d.columns+a;if(n[d.id].className[e]!==c){n[d.id].className[e]=c;var f=k(d,e);n[d.id].tiles[e].className=f+" "+c}},d.prototype.get=function(a,b){var c=this,d=b*c.columns+a;return{fore:n[c.id].fore[d],back:n[c.id].back[d],text:n[c.id].textNodes[d].nodeValue,className:n[c.id].className[d]}},d.prototype.addColor=function(a,b){var c=this,d=a+","+b;if(!(d in n[c.id].classMap)){var e="color-"+c.id+"-"+h(c.id);n[c.id].classMap[d]=e,f(c.sheet,"."+e,o.color({fore:a,back:b}))}},d.prototype.each=function(a){for(var b=this,c=0;c<b.columns*b.rows;c++){var d=c%b.columns,e=Math.floor(c/b.columns);a(d,e,c)}},d.defaults={columns:80,rows:25,fore:"#ddd",back:"#222",font:"16px monospace"};var n={},o={style:l("{{=it.selector}} { {{=it.rule}} }"),color:l("background: {{=it.back}}; color: {{=it.fore}};"),viewport:l("position: relative; width: {{=it.size.width}}px; height: {{=it.size.height}}px; font: {{=it.font}}"),tiles:l("position: absolute; line-height: {{=it.height}}px; width: {{=it.width}}px; height: {{=it.height}}px;"),tile:l("top: {{=it.top}}px; left: {{=it.left}}px;")};b.exports=d},{"./char-size":5,dot:2}]},{},[4]);